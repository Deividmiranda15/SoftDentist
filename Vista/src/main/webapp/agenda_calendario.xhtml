<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

<h:head>
    <title>Agenda de Citas - Calendario</title>
    <h:outputStylesheet name="css/patrondental.css" />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&amp;display=swap" rel="stylesheet" />

    <style>

        body {
            background-color: #e0f2f1;
            font-family: 'Poppins', sans-serif;
            margin: 0;
        }

        .main-container {
            max-width: 1200px;
            margin: 30px auto;
            padding: 20px;
        }

        .header-wrapper {
            text-align: center;
            margin-bottom: 30px;
            margin-top: 10px;
        }


        .page-title {
            background-color: rgba(255, 255, 255, 0.95);
            padding: 15px 60px;
            border-radius: 50px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);

            display: inline-block;

            color: #00695c;
            font-size: 1.8rem;
            font-weight: 600;
            margin: 0;
            border: 1px solid #e0f2f1;
        }

        .card-calendario {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .top-bar { padding: 10px 20px; background: white; border-bottom: 1px solid #ddd; display: flex; align-items: center;}
        .main-nav { background: #004d40; padding: 15px; display: flex; gap: 20px; justify-content: center; }
        .main-nav a, .main-nav span { color: white; text-decoration: none; font-weight: 500; font-size: 1.1em;}
        .main-nav .active {
            background-color: #000000 !important;
            color: #80cbc4 !important;
            border: 1px solid #80cbc4 !important;
            border-radius: 8px !important;

            display: inline-flex !important;
            align-items: center !important;
            justify-content: center !important;

            height: 40px !important;
            padding: 0 25px !important;

            font-size: 16px !important;
            font-weight: bold !important;
            text-decoration: none !important;
            text-transform: uppercase !important;
            line-height: 1 !important;
            box-sizing: border-box !important;
        }
        .ui-schedule, .fc {
            height: 600px !important;
            min-height: 600px !important;
        }

        .fc-scroller {
            height: 100% !important;
            overflow-y: auto !important;
        }

        .fc-timegrid-slot {
            border-bottom: 1px solid #e0e0e0 !important;
        }

        .view-switcher-container {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }

        .view-btn {
            padding: 8px 20px;
            border: 1px solid #ccc;
            text-decoration: none;
            font-family: 'Poppins', sans-serif;
            font-size: 0.95rem;
            color: #333;
            background-color: white;
            transition: all 0.2s ease;
        }

        .view-btn.first {
            border-radius: 4px 0 0 4px;
            border-right: none;
        }

        .view-btn.last {
            border-radius: 0 4px 4px 0;
        }

        .view-btn.active {
            background-color: #333;
            color: white;
            border-color: #333;
        }

        .view-btn:hover:not(.active) {
            background-color: #f5f5f5;
        }



    </style>
</h:head>

<h:body>

    <header>
        <div class="top-bar">
            <h:graphicImage name="images/logo.png" alt="Logo Dental Patron" style="height: 60px;"/>
        </div>

        <nav class="main-nav">
            <a href="inicio_emp.xhtml" class="nav-item">INICIO</a>
            <a href="pacientes.xhtml" class="nav-item">GESTION PACIENTES</a>
            <a href="#" class="nav-item active">CONSULTAR CITAS</a>
            <a href="corte_caja.xhtml" class="nav-item">CAJA</a>

        </nav>
    </header>

    <main class="main-container">
        <div class="header-wrapper">
            <h2 class="page-title">Agenda de Citas</h2>
        </div>

        <div class="view-switcher-container">
            <p:link outcome="consultacita_empleado" value="Ver Lista" styleClass="view-btn first" />

            <a href="#" class="view-btn last active">Ver Calendario</a>
        </div>
        <h:form id="formAgenda">
            <p:growl id="msgs" showDetail="true" />

            <div class="card-calendario">

                <p:schedule id="calendario"
                            value="#{agendaBean.eventModel}"
                            widgetVar="miCalendario"
                            height="500"
                            minTime="10:00:00"
                            maxTime="21:00:00">

                    <p:ajax event="eventSelect" listener="#{agendaBean.onEventSelect}" update="eventDetails" oncomplete="PF('eventDialog').show();" />

                </p:schedule>

            </div>
            <p:dialog widgetVar="eventDialog" header="Detalle de la Cita" modal="true" showEffect="fade" hideEffect="fade" responsive="true">

                <h:panelGrid id="eventDetails" columns="2" cellpadding="8" rendered="#{not empty agendaBean.event}">

                    <h:outputLabel value="Paciente:" style="font-weight: bold; color: #004d40; font-size: 1.1em;"/>
                    <h:outputText value="#{agendaBean.event.data.idPaciente.nombre} #{agendaBean.event.data.idPaciente.apellido}"
                                  style="font-size: 1.1em; font-weight: normal; color: #333;"/>

                    <h:outputLabel value="Motivo:" style="font-weight: bold; color: #004d40;"/>
                    <h:outputText value="#{agendaBean.event.data.motivo}" style="font-style: Arial;"/>

                    <h:outputLabel value="Estado:" style="font-weight: bold; color: #004d40;"/>
                    <h:outputText value="#{agendaBean.event.data.estado}"
                                  style="font-weight: bold; text-transform: uppercase; color: #00695c;"/>

                    <h:outputLabel value="Fecha:" style="font-weight: bold; color: #004d40;"/>
                    <h:outputText value="#{agendaBean.event.startDate}">
                        <f:convertDateTime pattern="EEEE dd 'de' MMMM, yyyy" type="localDateTime" locale="es_MX"/>
                    </h:outputText>

                    <h:outputLabel value="Hora Inicio:" style="font-weight: bold; color: #004d40;"/>
                    <h:outputText value="#{agendaBean.event.startDate}">
                        <f:convertDateTime pattern="h:mm a" type="localDateTime" locale="es_MX"/>
                    </h:outputText>

                    <h:outputLabel value="Hora Fin:" style="font-weight: bold; color: #004d40;"/>
                    <h:outputText value="#{agendaBean.event.endDate}">
                        <f:convertDateTime pattern="h:mm a" type="localDateTime" locale="es_MX"/>
                    </h:outputText>

                </h:panelGrid>
            </p:dialog>

        </h:form>
    </main>

    <script>
        PrimeFaces.locales['es'] = {
            closeText: 'Cerrar',
            prevText: 'Anterior',
            nextText: 'Siguiente',
            monthNames: ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'],
            monthNamesShort: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'],
            dayNames: ['Domingo', 'Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado'],
            dayNamesShort: ['Dom', 'Lun', 'Mar', 'Mie', 'Jue', 'Vie', 'Sab'],
            dayNamesMin: ['D', 'L', 'M', 'X', 'J', 'V', 'S'],
            weekHeader: 'Semana',
            firstDay: 1,
            isRTL: false,
            showMonthAfterYear: false,
            yearSuffix: '',
            timeOnlyTitle: 'Sólo hora',
            timeText: 'Tiempo',
            hourText: 'Hora',
            minuteText: 'Minuto',
            secondText: 'Segundo',
            currentText: 'Fecha actual',
            ampm: false,
            month: 'Mes',
            week: 'Semana',
            day: 'Día',
            allDayText: 'Todo el día'
        };
    </script>
</h:body>
</html>