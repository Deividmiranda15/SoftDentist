<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

<header>
    <div class="top-bar">
        <h:graphicImage name="images/logo.png" alt="Logo Dental Patron" style="height: 60px;"/>
    </div>
    <nav class="main-nav">
        <p:link outcome="inicio_admin" value="INICIO" />
        <p:link outcome="pacientes" value="GESTIONAR PACIENTES" />

        <a href="#" class="active">CONSULTAR CITAS</a>
    </nav>
</header>

<h:head>
    <title>Consulta de Citas</title>
    <h:outputStylesheet name="css/patrondental.css" />

    <style>
        body { background-color: #e0f2f1; font-family: 'Poppins', sans-serif; margin: 0; }

        .main-container {
            max-width: 1200px;
            margin: 30px auto;
            padding: 20px;
        }

        .header-wrapper {
            text-align: center;
            margin-bottom: 30px;
            margin-top: 10px;
        }


        .page-title {
            background-color: rgba(255, 255, 255, 0.95);
            padding: 15px 60px;
            border-radius: 50px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);

            display: inline-block;

            color: #00695c;
            font-size: 1.8rem;
            font-weight: 600;
            margin: 0;
            border: 1px solid #e0f2f1;
        }

        .view-switcher-container {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
        }
        .view-btn {
            padding: 8px 20px;
            border: 1px solid #ccc;
            text-decoration: none;
            font-family: 'Poppins', sans-serif;
            color: #333;
            background-color: white;
            transition: all 0.2s;
        }
        .view-btn.first { border-radius: 4px 0 0 4px; border-right: none; }
        .view-btn.last { border-radius: 0 4px 4px 0; }

        .view-btn.active {
            background-color: #333;
            color: white;
            border-color: #333;
        }
        .view-btn:hover:not(.active) { background-color: #f5f5f5; }


        .cards-container { display: flex; flex-direction: column; gap: 15px; }
        .cita-card {
            background-color: white;
            border-left: 6px solid #004d40;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: transform 0.2s;
        }

        .cita-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .cita-content {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .paciente-nombre {
            font-size: 1.2rem;
            font-weight: 600;
            color: #333;
        }

        .cita-detalles {
            color: #666;
            font-size: 0.95rem;
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .cita-motivo {
            font-style: italic;
            color: #00695c;
        }

        .estado-badge {
            background-color: #e0f2f1;
            color: #004d40;
            padding: 5px 12px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.85rem;
            text-transform: uppercase;
        }


        .top-bar { padding: 10px 20px; background: white; border-bottom: 1px solid #ddd; display: flex; align-items: center;}
        .main-nav { background: #004d40; padding: 15px; display: flex; gap: 20px; justify-content: center; }
        .main-nav a, .main-nav span { color: white; text-decoration: none; font-weight: 500; font-size: 1.1em;}
        .main-nav .active {
            background-color: #000000 !important;
            color: #80cbc4 !important;
            border: 1px solid #80cbc4 !important;
            border-radius: 8px !important;

            display: inline-flex !important;
            align-items: center !important;
            justify-content: center !important;

            height: 40px !important;
            padding: 0 25px !important;

            font-size: 16px !important;
            font-weight: bold !important;
            text-decoration: none !important;
            text-transform: uppercase !important;
            line-height: 1 !important;
            box-sizing: border-box !important;
        }

    </style>
</h:head>

<h:body>
    <main class="main-container">
        <div class="header-wrapper">
            <h2 class="page-title">Lista de Citas</h2>
        </div>

        <div class="view-switcher-container">
            <a href="#" class="view-btn first active">Ver Lista</a>

            <p:link outcome="agenda_calendario" value="Ver Calendario" styleClass="view-btn last" />
        </div>

        <div class="cards-container">
            <ui:repeat value="#{citaConsultaBean.listaCitas}" var="c">
                <div class="cita-card">

                    <div class="cita-content">
                        <span class="paciente-nombre">
                            #{c.idPaciente.nombre} #{c.idPaciente.apellido}
                        </span>

                        <div class="cita-detalles">
                            <span>
                                üìÖ <h:outputText value="#{c.fecha}">
                                    <f:convertDateTime type="localDate" pattern="dd 'de' MMMM" locale="es_MX"/>
                                </h:outputText>
                            </span>

                            <span>
                                üïí <h:outputText value="#{c.hora}">
                                    <f:convertDateTime type="localTime" pattern="h:mm a" locale="es_MX"/>
                                </h:outputText>
                            </span>

                            <span class="cita-motivo">
                                üìù #{c.motivo}
                            </span>
                        </div>
                    </div>

                    <div class="estado-badge">
                        #{c.estado}
                    </div>
                </div>
            </ui:repeat>

            <h:panelGroup rendered="#{empty citaConsultaBean.listaCitas}">
                <div style="text-align: center; padding: 40px; background: white; border-radius: 8px; color: #666;">
                    <h3>No hay citas registradas en la lista.</h3>
                </div>
            </h:panelGroup>
        </div>
    </main>
</h:body>
</html>